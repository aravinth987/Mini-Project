<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Patient Record- Health System</title>
    <meta name="description" content="Welcome to Easyfarm. You can get all latest updates on climate today.">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin:700">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/Login-Form-Dark.css">
    <link rel="stylesheet" href="assets/css/Registration-Form-with-Photo.css">
    <script src="https://cdn.jsdelivr.net/npm/web3@1.2.8/dist/web3.js"></script>
<script>	

var account;
window.addEventListener('load', async () => {


    if (typeof window.ethereum !== 'undefined') { 
        console.log("MetaMask is Available :) !"); 
        }
        
    // Modern DApp browsers
    if (window.ethereum) {
        window.web3 = new Web3(ethereum);
        
        // To prevent the page reloading when the MetaMask network changes
        ethereum.autoRefreshOnNetworkChange = false;
        
        // To Capture the account details from MetaMask
        const accounts = await ethereum.enable();
        account = accounts[0];
            
        }
    // Legacy DApp browsers
    else if (window.web3) {
        //window.web3 = new Web3(web3.currentProvider);
        window.web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/cbd9dc11b30147e9a2cc974be655ef7c")); 
        }
    // Non-DApp browsers
    else {
        console.log('Non-Ethereum browser detected. Please install MetaMask');
        }
        
        });
    

abi = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "_Name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_Email",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_Password",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "_phone",
				"type": "uint256"
			},
			{
				"internalType": "string",
				"name": "_hospital_name",
				"type": "string"
			},
			{
				"internalType": "uint128",
				"name": "doc_id",
				"type": "uint128"
			}
		],
		"name": "store",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	}
];
contractaddress = '0x3d9b696bcf1da53130e3a1177c17f44c8e366372';



var myContract = new web3.eth.Contract(abi,contractaddress, {from: account, gasPrice: '4000000000', gas: '8000000'});

                       

var result = myContract.methods.store(18).send(function (err, result) {

           

    console.log("Result: ", result);

        if (result) { console.log(result); }                   

    });        



var result = myContract.methods.retrieve().call(function (err, result) {

           

    console.log("Result: ", result);

        if (result) { console.log(result[0]); }                

    });        
</script>	
</head>

<body id="page-top" data-bs-spy="scroll" data-bs-target="#mainNav" data-bs-offset="77"style="width: 25%;">
    <nav class="navbar navbar-light navbar-expand-md fixed-top" id="mainNav">
        <div class="container"><a class="navbar-brand" href="#"></a><button data-bs-toggle="collapse" class="navbar-toggler navbar-toggler-right" data-bs-target="#navbarResponsive" type="button" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" value="Menu"><i class="fa fa-bars"></i></button>
            
        </div>
    </nav>
    <header class="masthead" style="background-image:url('assets/img/intro-bg.jpg');">
        <div class="intro-body">
            <h1>Patient report</h1>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Details</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Patient ID</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Age</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Blood Group</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Blood Pressure</td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>Diagnosis</td>
                            <td></td>
                        </tr>
                        
                    </tbody>
                </table>
                <div class="mb-3"><a class="btn btn-primary d-block w-100" role="button" href="Patient.html">update</a></div>
        </div>
    </header>
    <footer>
        <div class="container text-center">
            <p>&nbsp;Health System</p>
        </div>
    </footer>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/grayscale.js"></script>
</body>

</html>